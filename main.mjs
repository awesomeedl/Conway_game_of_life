import{Application as e,Graphics as l}from"https://cdn.jsdelivr.net/npm/pixi.js@7.1.2/dist/pixi.min.mjs";const t=new e({resizeTo:window}),n=t.renderer.width,i=t.renderer.height,o=n/100,r=Math.floor(n/o),d=Math.floor((i-100)/o);document.body.appendChild(t.view);const a=(new l).beginFill(65280).drawCircle(n/2,i-50,20).endFill();a.interactive=!0,a.buttonMode=!0,a.on("pointerdown",(function(){s=!s,c.interactive=!s,f.visible=!s,a.clear().beginFill(s?16711680:65280).drawCircle(n/2,i-50,20).endFill(),s||g()})),t.stage.addChild(a);const c=new l;c.on("pointerdown",(function(e){let l=Math.floor(e.data.global.x/o),t=Math.floor(e.data.global.y/o),n=1-w[t*r+l];w[t*r+l]=n,w[r*d+t*r+l]=n,c.beginFill(1===n?16777215:0).drawRect(l*o,t*o,o,o).endFill()})),c.interactive=!0,t.stage.addChild(c);const f=new l;t.stage.addChild(f),function(){f.lineStyle(1,16777215,.5);for(let e=0;e<r;e++)f.moveTo(e*o,0).lineTo(e*o,d*o);for(let e=0;e<d;e++)f.moveTo(0,(e+1)*o).lineTo(n,(e+1)*o)}();const w=new Array(r*d*2);g();let s=!1;function h(e,l){let t=0;for(let n=e-1<0?0:e-1;n<=e+1&&n<r;n++)for(let i=l-1<0?0:l-1;i<=l+1&&i<d;i++)n===e&&i===l||1===w[i*r+n]&&t++;return t}function g(){w.fill(0),c.clear().beginFill(0);for(let e=0;e<r;e++)for(let l=0;l<d;l++)c.drawRect(e*o,l*o,o,o);c.endFill()}let b=0;t.ticker.add((e=>{!1!==s&&(b+=e,b>10&&(b=0,function(){for(let e=0;e<r;e++)for(let l=0;l<d;l++){let t=h(e,l);1===w[l*r+e]?(t<2||t>3)&&(w[r*d+l*r+e]=0):3===t&&(w[r*d+l*r+e]=1)}}(),function(){c.clear();for(let e=0;e<r;e++)for(let l=0;l<d;l++)w[l*r+e]=w[r*d+l*r+e],c.beginFill(1===w[l*r+e]?16777215:0).drawRect(e*o,l*o,o,o);c.endFill()}()))}));