import{Application as e,Graphics as t}from"https://cdn.jsdelivr.net/npm/pixi.js@7.1.2/dist/pixi.min.mjs";const l=new e({resizeTo:window}),n=l.renderer.width,i=l.renderer.height,o=n/100,r=Math.floor(n/o),d=Math.floor((i-100)/o);document.body.appendChild(l.view);const a=(new t).beginFill(65280).drawCircle(n/2,i-50,20).endFill();a.interactive=!0,a.buttonMode=!0,a.on("pointerdown",(function(){s=!s,c.interactive=!s,f.visible=!s,a.clear().beginFill(s?16711680:65280).drawCircle(n/2,i-50,20).endFill(),s||g()})),l.stage.addChild(a);const c=new t;c.on("pointerdown",(function(e){let t=Math.floor(e.data.global.x/o),l=Math.floor(e.data.global.y/o),n=1-w[l*r+t];w[l*r+t]=n,w[r*d+l*r+t]=n,c.beginFill(1===n?16777215:0).drawRect(t*o,l*o,o,o).endFill()})),c.interactive=!0,l.stage.addChild(c);const f=new t;l.stage.addChild(f),function(){f.lineStyle(1,16777215,.5);for(let e=0;e<r;e++)f.moveTo(e*o,0).lineTo(e*o,d*o);for(let e=0;e<d;e++)f.moveTo(0,(e+1)*o).lineTo(n,(e+1)*o)}();const w=new Int8Array(r*d*2);g();let s=!1;function h(e,t){let l=0;for(let n=e-1<0?0:e-1;n<=e+1&&n<r;n++)for(let i=t-1<0?0:t-1;i<=t+1&&i<d;i++)n===e&&i===t||1===w[i*r+n]&&l++;return l}function g(){w.fill(0),c.clear().beginFill(0);for(let e=0;e<r;e++)for(let t=0;t<d;t++)c.drawRect(e*o,t*o,o,o);c.endFill()}let b=0;l.ticker.add((e=>{!1!==s&&(b+=e,b>10&&(b=0,function(){for(let e=0;e<r;e++)for(let t=0;t<d;t++){let l=h(e,t);1===w[t*r+e]?(l<2||l>3)&&(w[r*d+t*r+e]=0):3===l&&(w[r*d+t*r+e]=1)}}(),function(){c.clear();for(let e=0;e<r;e++)for(let t=0;t<d;t++)w[t*r+e]=w[r*d+t*r+e],c.beginFill(1===w[t*r+e]?16777215:0).drawRect(e*o,t*o,o,o);c.endFill()}()))}));